(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(20),i=n.n(a),s=(n(27),n(22)),o=n(8),u=(n(28),n(11)),l=n(2),j=n(6),d=n.n(j),h=n(10),p=n(1),v="https://dataservice.accuweather.com";function b(e,t){return f.apply(this,arguments)}function f(){return(f=Object(h.a)(d.a.mark((function e(t,n){var c,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(v,"/locations/v1/cities/autocomplete?apikey=").concat(n,"&q=").concat(t),e.next=3,fetch(c);case 3:return r=e.sent,e.next=6,r.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return O.apply(this,arguments)}function O(){return(O=Object(h.a)(d.a.mark((function e(t,n){var c,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(v,"/forecasts/v1/daily/5day/").concat(t,"?apikey=").concat(n,"&metric=true"),e.next=3,fetch(c);case 3:return r=e.sent,e.next=6,r.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=function(e){var t,n,r,a,i,s,u,l=e.API_KEY,j=e.favorites,v=e.addToFavorites,f=e.removeFavorite,O=Object(c.useState)(null),m=Object(o.a)(O,2),y=m[0],w=m[1],g=Object(c.useState)([]),F=Object(o.a)(g,2),N=F[0],k=F[1],M=Object(c.useState)([]),A=Object(o.a)(M,2),K=A[0],C=A[1],P=Object(c.useState)(!1),S=Object(o.a)(P,2),T=S[0],E=S[1],z="https://dataservice.accuweather.com/locations/v1/cities/search?apikey=".concat(l,"&q=tel aviv");function I(){return(I=Object(h.a)(d.a.mark((function e(t){var n,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value,!t.nativeEvent.data){e.next=8;break}return e.next=4,b(n,l);case 4:c=e.sent,C(c),e.next=11;break;case 8:r=K.find((function(e){return e.LocalizedName===n})),w(r),D(r.Key);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return V.apply(this,arguments)}function V(){return(V=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(z).then((function(e){return e.json()})).then((function(e){w(e[0])}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return Y.apply(this,arguments)}function Y(){return(Y=Object(h.a)(d.a.mark((function e(){var t,n=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"215854",e.next=3,x(t,l).then((function(e){k(e.DailyForecasts)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){function e(){return(e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L();case 3:return e.next=5,D();case 5:E(!0),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[z]);var _=j.find((function(e){return e.Key===(null===y||void 0===y?void 0:y.Key)}));return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"Main-top",children:[Object(p.jsxs)("div",{className:"Main-Current",children:[Object(p.jsx)("h1",{children:"Current weather:"}),T?Object(p.jsx)("h1",{className:"current-city",children:null===(t=j[0])||void 0===t?void 0:t.LocalizedName}):Object(p.jsx)("p",{children:"loading..."}),T?Object(p.jsxs)("h2",{className:"current-degree",children:[Math.floor(((null===(n=N[0])||void 0===n||null===(r=n.Temperature)||void 0===r||null===(a=r.Maximum)||void 0===a?void 0:a.Value)+(null===(i=N[0])||void 0===i||null===(s=i.Temperature)||void 0===s||null===(u=s.Minimum)||void 0===u?void 0:u.Value))/2),"C"]}):Object(p.jsx)("p",{children:"loading..."}),T?Object(p.jsx)("h1",{className:"current-description",children:N[0].Day.IconPhrase}):Object(p.jsx)("p",{children:"loading..."})]}),Object(p.jsxs)("div",{className:"Main-search",children:[Object(p.jsx)("input",{type:"text",list:"search",placeholder:"search weather",onChange:function(e){return I.apply(this,arguments)}}),Object(p.jsx)("datalist",{id:"search",children:K.map((function(e){return Object(p.jsx)("option",{value:e.LocalizedName})}))}),Object(p.jsx)("button",{className:"add",onClick:function(){if(_)return f(y);v(y)},children:_?"Remove From favorites":"Add to favorites"})]})]}),T?Object(p.jsx)("div",{children:Object(p.jsx)("ul",{children:N.map((function(e,t){var n,c,r,a;return Object(p.jsxs)("li",{children:[Object(p.jsx)("p",{children:new Date(e.Date).toString().split(" ")[0]}),Object(p.jsx)("br",{}),Object(p.jsxs)("p",{children:[Math.floor(((null===e||void 0===e||null===(n=e.Temperature)||void 0===n||null===(c=n.Maximum)||void 0===c?void 0:c.Value)+(null===e||void 0===e||null===(r=e.Temperature)||void 0===r||null===(a=r.Minimum)||void 0===a?void 0:a.Value))/2),"C"]})]},t)}))})}):Object(p.jsx)("p",{children:"Loading..."})]})};var y=function(e){var t=e.API_KEY,n=e.favorites,r=Object(c.useState)([]),a=Object(o.a)(r,2),i=a[0],s=a[1];return Object(c.useEffect)((function(){var e=n.map((function(e){return fetch("https://dataservice.accuweather.com/currentconditions/v1/".concat(e.Key,"?apikey=").concat(t,"&metric=true")).then((function(e){return e.json()})).then((function(e){return e[0]}))}));Promise.all(e).then((function(e){s(e)}))}),[]),Object(p.jsx)("ul",{className:"Favorite-city",children:n.map((function(e,t){var n;return Object(p.jsx)("li",{children:Object(p.jsx)(u.b,{to:"/Main",replace:!0,children:Object(p.jsxs)("button",{className:"Favorites-button",children:[Object(p.jsx)("div",{children:e.LocalizedName}),Object(p.jsx)("div",{children:null===(n=i[t])||void 0===n?void 0:n.Temperature.Metric.Value})]})})})}))})};var w=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],a="xus45HuCuActYKAh9z5nVFz5nolwmJzR";function i(e){r(n.filter((function(t){return e.Key!==t.Key})))}return console.log("favorites",n),Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)(u.a,{children:[Object(p.jsxs)("header",{className:"App-header",children:[Object(p.jsx)(u.b,{to:"/Main",replace:!0,children:Object(p.jsx)("button",{className:"App-main-button",children:"Main Page"})}),Object(p.jsx)(u.b,{to:"/Favorites",replace:!0,children:Object(p.jsx)("button",{className:"App-fav-button",children:"Favorites"})})]}),Object(p.jsxs)(l.d,{children:[Object(p.jsx)(l.b,{exact:!0,path:"/",render:function(){return Object(p.jsx)(l.a,{to:"/Main"})}}),Object(p.jsx)(l.b,{exact:!0,path:"/Main",children:Object(p.jsx)(m,{API_KEY:a,favorites:n,removeFavorite:i,addToFavorites:function(e){r([].concat(Object(s.a)(n),[e]))}})}),Object(p.jsx)(l.b,{exact:!0,path:"/Favorites",children:Object(p.jsx)(y,{API_KEY:a,removeFavorite:i,favorites:n})})]})]})})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(w,{})}),document.getElementById("root")),g()}},[[36,1,2]]]);
//# sourceMappingURL=main.a54c739f.chunk.js.map